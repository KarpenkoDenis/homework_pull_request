# Инструкция по работе с git

## Начало работы

При **первом использовании** Git *необходимо представиться*.
Для этого нужно ввести в **терминале** 2 команды:
> git config --global user.name «Ваше имя английскими буквами» 

> git config --global user.email ваша почта@example.com

## Основные команды git

### Добавление информации в репозиторий

* Для ***инициализации локального репозитория*** необходимо:
1. открыть существующую *(или создать новую)* папку в **VS Code**;
2. Запустить терминал: **Terminal -> New Terminal**
3. Ввести в терминале команду 
> git init

* ***Добавить новый файл в индекс изменений*** можно с помощью команды:
> git add "[название файла]" - *добавить файл к будущему коммиту*

> git add . - *для добавления директории и всех вложенных файлов*

* Запись текущего состояния в истории изменений (***создание коммита***) осуществляется с помощью команды:
> git commit -m '[сообщение об изменении]'

> git commit -am '[сообщение об изменении]' *= git add + git commit*

Каждый коммит имеет **уникальный код из букв и цифр**, чтобы можно было вернуться к определенному состоянию.

### Вывод информации

* Чтобы получить ***информацию от git о его текущем состоянии***, нужно ввести в терминале команду:
> git status

**Git никогда не удаляет данные** - любое изменение, в том числе удаление файлов, всегда только добавляет данные в репозиторий. 

 * ***Получить доступ к истории коммитов репозитория*** можно введя в терминале команду:
> git log - *вывод на экран истории всех коммитов с их хеш-кодами*
> git log --oneline - *компактный вид истории*

* Чтобы увидеть разницу между текущим файлом и закоммиченным файлом, нужно ввести в терминале команду
> git diff

### Переход к прошлым коммитам

* ***Для перемещения между изменениями*** и обращения к нужной версии файла используются команды:
> git checkout - *переход от одного коммита к другому*

> git checkout master - *вернуться к актуальному состоянию и продолжить работу*

### Работа с ветками

**Ветки** - временные копии состояния репозитория на данный момент, создаваемые для работы, внесения изменений, записи текущих коммитов, которые затем пересматриваются и при необходимости добавляются в основную (master) ветку.

Таким образом несколько разработчиков могут вносить изменения в проект **не пересекаясь друг с другом**.

Для просмотра ***списка всех веток в репозитории*** необходимо ввести в терминале команду:

> git branch - _текущая ветка будет помечена звездочкой (*)_

> git log --graph - _отображение списка коммитов по веткам_

***Управление ветками*** осуществляется следующими командами:

> git branch branch_name - _создание новой ветки_

> git branch new_branch old_branch - _копия старой ветки_

> git checkout branch_name - _переключение между ветками_

> git checkout -b branch_name - _переключение + автоматическое создание новой ветки, если ее еще не существует_

> git branch -d branch name - _удаление ветки_

Операция объединения веток называется ***слиянием***:

> git merge branch_name - _слияние указанной ветки с текущей_

Коммиты, записанные на отдельной ветке, не попадают в мастер, пока мы сами их не подключим.

Коммиты, сделанные в мастере после создания копии, не отображаются в новой ветке.

### Решение конфликтов

Изменение одного и того же файла с разных источников с попыткой последующего объединения может привести к конфликту.

Например, были созданы две ветки (dev1, dev2) и внесены изменения в один и тот же файл.

> git checkout master

> git merge dev1 dev2

При возникновении конфликта необходимо ***ручное исправление***:

> git merge --abort - _отменить объединение_

> vi info.md - _открыть конфликтный файл через текстовый редактор, удалить неактуальный код, ввести в терминале esc: wq_

## Работа с удалёнными репозиториями в Git - GitHub

**GitHub** - сервис, позволяющий интегрироваться с программой Git и настроить удаленную работу с репозиториями.

### Настройка GitHub

***Для начала работы с удаленным репозиторием, созданным другим человеком***, необходимо:

1. Сделать __Fork__ *(ответвление)* оригинального репозитория на свой аккаунт GitHub
2. В своей копии репозитория нажать кнопку **Code -> Clone HTTP/SSH -> Copy**
3. Создать новую папку с помощью VS Code -> **Open in Integrated Terminal** -> ввести в терминале команду

> git clone -link- - _скопировать резиторий на свой ПК_

Иначе, можно ***настроить свой собственный удаленный репозиторий на сервисе GitHub*** с помощью последовательности команд:

> mkdir new_folder - _создать новую пустую директорию на своем ПК_

> git init - _создание пустого репозитория в текущем местоположении_

> git remote add origin -link- - _синхронизация между локальным и удаленным репозиториями_

> git remote -v - _просмотр списка подключенных удаленных соединений_

### Синхронизация репозиториев

Для ***скачивания проекта и его изменений из удаленного репозитория*** с автоматическим слиянием (merge) с нашей локальной версией, необходимо ввести команду:

> git pull - _скачивание и слияние изменений с удаленного репозитория_

***Отправка своей версии репозитория*** с внесенными в ней изменениями во внешний репозиторий осуществляется с помощью команды (требует авторизации):

> git push - _загрузка всех изменений на удаленный репозиторий_

> git push --set-upstream origin branch_name - *создать ветку в исходном репозитории*

> git push -u -origin branch_name - *загрузить данные с текущей ветки на ветку origin*

Подгрузить обновления из удаленного репозитория (***обновить синхронизацию***) можно с помощью команды:

> git fetch - _получение изменений с сервера_

В отличие от git pull, _git fetch не осуществляет автоматический merge коммитов_: git собирает все коммиты из целевой ветки, которых нет в текущей ветке, и сохраняет их в локальном репозитории _без слияния в текущую ветку_. Чтобы слить коммиты в основную ветвь, нужно использовать merge.

### Pull-requests

***Запросы на слияние*** своей измененной версии проекта с его оригиналом отправляются в целях:

* Обсуждение с коллегами

* Работа с комментариями, голосование за то или иное решение

* Выполнение code-review

* Автоматическое тестирование на баги.

При создании изменений на новой ветке и их загрузке (*push*) на удаленный репозиторий, на GitHub появляется кнопка **Compare & Pull Request**, при нажатии на которую автоматически открывается новый **pull request**, в котором можно:

* написать название запроса

* описать запрос (оставить комментарий)

* посмотреть, с какой ветки на какую будет производиться merge

* посмотреть краткое описание изменений в каждом файле.

При подтверждении слияния нажатием кнопки **Create pull request** будет создан новый объект репозитория, доступный только на GitHub - **вкладка Pull requests**.

### Порядок работы с Fork

**Fork** - создание копии существующего репозитория другого разработчика с *open source (GitHub)* с целью разработки своей собственной версии оригинального продукта:

1. Создать Fork оригинального репозитория к себе
2. Клонирование своей версии репозитория на свой ПК
3. Разработка - внесение изменений на новой ветке, создание коммитов
4. Публикация обновленной версии на своем GitHub
5. Создание pull-request к оригинальной версии проекта.

## Дополнительно
Посмотреть справочник по *Docs Markdown* можно по ссылке:
https://docs.microsoft.com/ru-ru/contribute/markdown-reference 

**Синтаксис языка Markdown**

![шпаргалка Markdown](Screenshot.png)
